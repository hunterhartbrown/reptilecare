<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReptileCare</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body
  data-rc-hero="false"
  data-rc-species="false"
  data-rc-how="false"
  data-rc-mission="false"
  data-rc-newsletter="false"
  data-rc-midcta="false"
>
    <header id="main-header"></header>

    <section>
        <div class="content-slider">
            <!-- Dynamic content will be loaded here by the script below -->
            <div class="dots-container"></div>
        </div>
    </section>

    <!-- rc: additive sections start -->
    <section data-rc-new="hero" hidden>
      <div class="rc-hero">
        <div class="rc-hero__copy">
          <h2>Clear, science-based reptile care.</h2>
          <p>Get trustworthy, research-backed guidance for healthy habitats.</p>
          <div class="rc-hero__cta">
            <a href="/enclosure-builder" class="rc-btn rc-btn--primary" data-rc-event="rc_cta_enclosure_builder_click">Build My Enclosure</a>
            <a href="/all-care-guides" class="rc-btn rc-btn--ghost">Browse Care Guides</a>
          </div>
        </div>
        <div class="rc-hero__media">
          <img src="/images/hero-reptile-habitat.jpg" alt="Reptile habitat with proper lighting" width="600" height="400" loading="lazy">
        </div>
      </div>
    </section>

    <section data-rc-new="species-shortcuts" hidden>
      <h2 class="rc-h2">Popular Species</h2>
      <ul class="rc-tiles">
        <li><a href="/enclosure-builder?reptile=leopard-gecko"><img src="/images/leo trans bg.png" alt="Leopard Gecko" width="200" height="128" loading="lazy"><span>Leopard Gecko</span></a></li>
        <li><a href="/enclosure-builder?reptile=bearded-dragon"><img src="/images/bearded drag trans bg.png" alt="Bearded Dragon" width="200" height="128" loading="lazy"><span>Bearded Dragon</span></a></li>
        <li><a href="/enclosure-builder?reptile=crested-gecko"><img src="/images/crested gecko trans bg.png" alt="Crested Gecko" width="200" height="128" loading="lazy"><span>Crested Gecko</span></a></li>
        <li><a href="/enclosure-builder?reptile=eastern-collared-lizard"><img src="/images/collared lizard trans bg.png" alt="Eastern Collared Lizard" width="200" height="128" loading="lazy"><span>Eastern Collared Lizard</span></a></li>
      </ul>
    </section>

    <section data-rc-new="how-it-works" hidden>
      <h2 class="rc-h2">How It Works</h2>
      <ol class="rc-steps">
        <li><strong>Pick your species</strong><br>Select your reptile from our database.</li>
        <li><strong>Auto-size habitat</strong><br>Get enclosure, heating, and UVB recommendations.</li>
        <li><strong>Add dÃ©cor & export</strong><br>Customize and export a parts list.</li>
      </ol>
      <p class="rc-disclosure">* This site contains affiliate links. We may earn a commission when you purchase through our recommendations.</p>
    </section>

    <section data-rc-new="mission-micro" hidden>
      <p class="rc-mission">
        We believe every reptile deserves a habitat that supports natural behaviors and long-term health.
        Our science-based approach helps you build environments where reptiles thrive.
        <a href="/about">Learn more</a>
      </p>
    </section>

    <section data-rc-new="midpage-enclosure-cta" hidden>
      <div class="rc-cta">
        <div>
          <h3>Ready to build the perfect habitat?</h3>
          <p>Start with the Enclosure Designer.</p>
        </div>
        <a href="/enclosure-builder" class="rc-btn rc-btn--invert">Start Building</a>
      </div>
    </section>

    <section data-rc-new="newsletter" hidden>
      <form class="rc-news" novalidate>
        <label for="rc-email" class="rc-visually-hidden">Email</label>
        <input id="rc-email" type="email" placeholder="Enter your email" required>
        <button type="submit" class="rc-btn rc-btn--primary">Subscribe</button>
        <p class="rc-news__msg" aria-live="polite"></p>
      </form>
    </section>
    <!-- rc: additive sections end -->

    <div id="main-footer"></div>    

  <!-- Mobile Menu JavaScript (loads header and handles mobile menu functionality) -->
  <script src="js/mobile-menu.js"></script>

  <!-- Page-specific JavaScript for slides -->
  <script>
    // loadJson stays the sameâ€¦
    function loadJson(fileName, callback) {
      var xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      xobj.open('GET', fileName, true);
      xobj.onreadystatechange = function () {
        if (xobj.readyState === 4 && xobj.status === 200) {
          callback(JSON.parse(xobj.responseText));
        }
      };
      xobj.send(null);
    }

    var slideIndex = 0,
        autoTimer;

    function init() {
      loadJson('/data/reptile_care_data.json', function(data) {
        var container   = document.querySelector('.content-slider'),
            dotsWrapper = container.querySelector('.dots-container');

        // 1) Build slides & dots
        data.forEach(function(item, idx) {
          // â€” build slide â€”
          var slide = document.createElement('div');
          slide.className = 'slide';
          slide.style.display = idx === 0 ? 'flex' : 'none';

          var imgDiv = document.createElement('div');
          imgDiv.className = 'slide-image';
          var img = document.createElement('img');
          img.src = item['Picture Link'];
          img.alt = item['Common Name'];
          if (img.src.includes("Leopard-Gecko-Climbing.jpg")) {
            img.classList.add('problematic-image');
          }
          imgDiv.appendChild(img);

          var textDiv = document.createElement('div');
          textDiv.className = 'overlay-text';
          textDiv.innerHTML = 
            `<h3 class="common-name">${item['Common Name']}</h3>` +
            `<h4 class="species-name">${item['Species']}</h4>`;

          slide.appendChild(imgDiv);
          slide.appendChild(textDiv);
          // insert slide before dotsContainer so dots stay at bottom
          container.insertBefore(slide, dotsWrapper);

          // â€” build dot â€”
          var dot = document.createElement('span');
          dot.className = 'dot' + (idx === 0 ? ' active' : '');
          dot.dataset.slide = idx;
          dot.addEventListener('click', function() {
            showSlide(parseInt(this.dataset.slide, 10));
          });
          dotsWrapper.appendChild(dot);
        });

        // 2) start auto-rotation
        rotateSlides();
      });
    }

    function showSlide(n) {
      var slides = document.getElementsByClassName('slide'),
          dots   = document.getElementsByClassName('dot');

      // hide all slides & clear active from all dots
      for (var i = 0; i < slides.length; i++) {
        slides[i].style.display = 'none';
        dots[i].classList.remove('active');
      }

      // show the selected one
      slides[n].style.display = 'flex';
      dots[n].classList.add('active');

      // reset slideIndex so auto continues from here
      slideIndex = n;
    }

    function rotateSlides() {
      var slides = document.getElementsByClassName('slide'),
          total  = slides.length;

      clearTimeout(autoTimer);
      slideIndex = (slideIndex + 1) % total;
      showSlide(slideIndex);

      // queue next
      autoTimer = setTimeout(rotateSlides, 6000);
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>

  <!-- RC Additive Sections JavaScript -->
  <script>
  (function(){
    const body = document.body;

    // Read flags from body data-attrs
    const flags = {
      hero: body.getAttribute('data-rc-hero') === 'true',
      species: body.getAttribute('data-rc-species') === 'true',
      how: body.getAttribute('data-rc-how') === 'true',
      mission: body.getAttribute('data-rc-mission') === 'true',
      news: body.getAttribute('data-rc-newsletter') === 'true',
      midcta: body.getAttribute('data-rc-midcta') === 'true'
    };

    // Optional: preview override via ?rcFlags=hero,species,how,mission,news,midcta
    try {
      const url = new URL(window.location.href);
      const raw = url.searchParams.get('rcFlags');
      if (raw) {
        raw.split(',').map(s => s.trim()).forEach(key => {
          if (key) flags[key] = true;
        });
      }
    } catch(e){}

    // Helper to reveal a section if its flag is true
    function toggleSection(name, on) {
      const el = document.querySelector('[data-rc-new="'+name+'"]');
      if (!el) return;
      if (on) el.hidden = false;
    }

    toggleSection('hero', flags.hero);
    toggleSection('species-shortcuts', flags.species);
    toggleSection('how-it-works', flags.how);
    toggleSection('mission-micro', flags.mission);
    toggleSection('newsletter', flags.news);
    toggleSection('midpage-enclosure-cta', flags.midcta);

    // Analytics hook for hero CTA (non-destructive)
    document.addEventListener('click', function(e){
      const a = e.target.closest('[data-rc-event="rc_cta_enclosure_builder_click"]');
      if (!a) return;
      // Dispatch a custom event the existing analytics can listen for if desired
      const ev = new CustomEvent('rc_cta_enclosure_builder_click', { bubbles: true });
      a.dispatchEvent(ev);
    });

    // Newsletter mock (no network)
    const form = document.querySelector('[data-rc-new="newsletter"] .rc-news');
    if (form) {
      const input = form.querySelector('input[type="email"]');
      const msg = form.querySelector('.rc-news__msg');
      form.addEventListener('submit', function(ev){
        ev.preventDefault();
        if (!input.value) { msg.textContent = 'Please enter a valid email.'; return; }
        msg.textContent = 'Thanks for subscribing! ðŸŽ‰';
        input.value = '';
      });
    }
  })();
  </script>
</body>
</html>
