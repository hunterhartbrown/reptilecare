<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReptileCare</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header id="main-header"></header>

    <section>
        <div class="content-slider">
            <!-- Dynamic content will be loaded here by the script below -->
            <div class="dots-container"></div>
        </div>
    </section>

    <!-- rc: additive sections start -->
    <section data-rc-new="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1>Clear, science-based reptile care.</h1>
                <p>Build the perfect habitat for your reptile with our expert-guided enclosure builder and comprehensive care guides.</p>
                <div class="hero-ctas">
                    <a href="/enclosure-builder" class="cta-primary" data-rc-event="rc_cta_enclosure_builder_click">Build Your Enclosure</a>
                    <a href="/all-care-guides" class="cta-secondary">Browse Care Guides</a>
                </div>
            </div>
            <div class="hero-image">
                <img src="images/bearded drag trans bg.png" alt="Bearded dragon in natural habitat setup" width="400" height="300" loading="lazy">
            </div>
        </div>
    </section>

    <section data-rc-new="species-shortcuts">
        <div class="species-container">
            <h2>Popular Species</h2>
            <div class="species-grid">
                <a href="/enclosure-builder?reptile=leopard-gecko" class="species-tile">
                    <div class="species-image-container">
                        <img src="images/leo trans bg.png" alt="Leopard Gecko" width="200" height="150" loading="lazy">
                    </div>
                    <h3>Leopard Gecko</h3>
                </a>
                <a href="/enclosure-builder?reptile=bearded-dragon" class="species-tile">
                    <div class="species-image-container">
                        <img src="images/bearded drag trans bg.png" alt="Bearded Dragon" width="200" height="150" loading="lazy">
                    </div>
                    <h3>Bearded Dragon</h3>
                </a>
                <a href="/enclosure-builder?reptile=crested-gecko" class="species-tile">
                    <div class="species-image-container">
                        <img src="images/crested gecko trans bg.png" alt="Crested Gecko" width="200" height="150" loading="lazy">
                    </div>
                    <h3>Crested Gecko</h3>
                </a>
                <a href="/enclosure-builder?reptile=eastern-collared-lizard" class="species-tile">
                    <div class="species-image-container">
                        <img src="images/collared lizard trans bg.png" alt="Eastern Collared Lizard" width="200" height="150" loading="lazy">
                    </div>
                    <h3>Eastern Collared Lizard</h3>
                </a>
            </div>
        </div>
    </section>

    <section data-rc-new="mid-page-cta">
        <div class="mid-cta-container">
            <div class="mid-cta-content">
                <h2>Ready to build the perfect habitat?</h2>
                <a href="/enclosure-builder" class="cta-primary">Start Building</a>
            </div>
        </div>
    </section>

    <section data-rc-new="how-it-works">
        <div class="how-it-works-container">
            <h2>How It Works</h2>
            <div class="steps-grid">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Pick Your Species</h3>
                    <p>Select your reptile from our comprehensive database of care requirements.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Auto-Size Habitat</h3>
                    <p>Get automatic recommendations for enclosure size, heating, and UVB lighting.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Add Décor & Export</h3>
                    <p>Customize with plants, hides, and substrate, then export your shopping list.</p>
                </div>
            </div>
            <p class="affiliate-disclosure">
                We may earn a commission from qualifying purchases made through our recommended product links.
            </p>
        </div>
    </section>

    <section data-rc-new="mission-micro">
        <div class="mission-container">
            <h2>Our Mission</h2>
            <p>We provide evidence-based reptile care information to help you create the healthiest environment for your scaly friends. Our team combines scientific research with practical experience to deliver reliable, actionable advice.</p>
            <a href="/about" class="learn-more-link">Learn more about our approach</a>
        </div>
    </section>

    <section data-rc-new="newsletter">
        <div class="newsletter-container">
            <h2>Stay Updated</h2>
            <p>Get the latest care tips and habitat building guides delivered to your inbox.</p>
            <form class="newsletter-form" id="newsletter-form">
                <label for="newsletter-email" class="sr-only">Email address</label>
                <input type="email" id="newsletter-email" name="email" placeholder="Enter your email" required>
                <button type="submit">Subscribe</button>
            </form>
            <div id="newsletter-message" class="newsletter-message" style="display: none;"></div>
        </div>
    </section>
    <!-- rc: additive sections end -->

    <div id="main-footer"></div>    

  <!-- Mobile Menu JavaScript (loads header and handles mobile menu functionality) -->
  <script src="js/mobile-menu.js"></script>

  <!-- Page-specific JavaScript for slides -->
  <script>
    // loadJson stays the same…
    function loadJson(fileName, callback) {
      var xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      xobj.open('GET', fileName, true);
      xobj.onreadystatechange = function () {
        if (xobj.readyState === 4 && xobj.status === 200) {
          callback(JSON.parse(xobj.responseText));
        }
      };
      xobj.send(null);
    }

    var slideIndex = 0,
        autoTimer;

    function init() {
      loadJson('/data/reptile_care_data.json', function(data) {
        var container   = document.querySelector('.content-slider'),
            dotsWrapper = container.querySelector('.dots-container');

        // 1) Build slides & dots
        data.forEach(function(item, idx) {
          // — build slide —
          var slide = document.createElement('div');
          slide.className = 'slide';
          slide.id = 'slide-' + (idx + 1);
          slide.style.display = idx === 0 ? 'flex' : 'none';

          var imgDiv = document.createElement('div');
          imgDiv.className = 'slide-image';
          imgDiv.id = 'slide-' + (idx + 1) + '-image';
          var img = document.createElement('img');
          img.src = item['Picture Link'];
          img.alt = item['Common Name'];
          img.id = 'slide-' + (idx + 1) + '-img';
          if (img.src.includes("Leopard-Gecko-Climbing.jpg")) {
            img.classList.add('problematic-image');
          }
          imgDiv.appendChild(img);

          var textDiv = document.createElement('div');
          textDiv.className = 'overlay-text';
          textDiv.id = 'slide-' + (idx + 1) + '-text';
          textDiv.innerHTML = 
            `<h3 class="common-name">${item['Common Name']}</h3>` +
            `<h4 class="species-name">${item['Species']}</h4>`;

          slide.appendChild(imgDiv);
          slide.appendChild(textDiv);
          // insert slide before dotsContainer so dots stay at bottom
          container.insertBefore(slide, dotsWrapper);

          // — build dot —
          var dot = document.createElement('span');
          dot.className = 'dot' + (idx === 0 ? ' active' : '');
          dot.dataset.slide = idx;
          dot.addEventListener('click', function() {
            showSlide(parseInt(this.dataset.slide, 10));
          });
          dotsWrapper.appendChild(dot);
        });

        // 2) start auto-rotation
        rotateSlides();
      });
    }

    function showSlide(n) {
      var slides = document.getElementsByClassName('slide'),
          dots   = document.getElementsByClassName('dot');

      // hide all slides & clear active from all dots
      for (var i = 0; i < slides.length; i++) {
        slides[i].style.display = 'none';
        dots[i].classList.remove('active');
      }

      // show the selected one
      slides[n].style.display = 'flex';
      dots[n].classList.add('active');

      // reset slideIndex so auto continues from here
      slideIndex = n;
    }

    function rotateSlides() {
      var slides = document.getElementsByClassName('slide'),
          total  = slides.length;

      clearTimeout(autoTimer);
      slideIndex = (slideIndex + 1) % total;
      showSlide(slideIndex);

      // queue next
      autoTimer = setTimeout(rotateSlides, 6000);
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>

  <!-- Additive JavaScript for new sections -->
  <script>
    // Analytics for hero CTA click
    document.addEventListener('DOMContentLoaded', function() {
      const heroCTA = document.querySelector('[data-rc-event="rc_cta_enclosure_builder_click"]');
      if (heroCTA) {
        heroCTA.addEventListener('click', function(e) {
          // Dispatch custom event for analytics
          const event = new CustomEvent('rc_cta_enclosure_builder_click', {
            detail: {
              element: e.target,
              href: e.target.href,
              timestamp: new Date().toISOString()
            }
          });
          document.dispatchEvent(event);
        });
      }

      // Newsletter form handling
      const newsletterForm = document.getElementById('newsletter-form');
      const newsletterMessage = document.getElementById('newsletter-message');
      
      if (newsletterForm && newsletterMessage) {
        newsletterForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const email = document.getElementById('newsletter-email').value;
          
          // Client-side validation
          if (!email || !email.includes('@')) {
            showNewsletterMessage('Please enter a valid email address.', 'error');
            return;
          }
          
          // Simulate subscription (no network request)
          setTimeout(function() {
            showNewsletterMessage('Thank you for subscribing! We\'ll keep you updated on reptile care tips.', 'success');
            newsletterForm.reset();
          }, 500);
        });
      }
      
      function showNewsletterMessage(message, type) {
        newsletterMessage.textContent = message;
        newsletterMessage.className = 'newsletter-message ' + type;
        newsletterMessage.style.display = 'block';
        
        // Hide message after 5 seconds
        setTimeout(function() {
          newsletterMessage.style.display = 'none';
        }, 5000);
      }
    });
  </script>
</body>
</html>
